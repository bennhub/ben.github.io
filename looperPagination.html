<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Ben N</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
      
        <!-- Favicon and Apple Touch Icon -->
        <link rel="shortcut icon" href="images/content/favicon.ico">
      
        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,600,400italic,700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
      
        <!-- Animate.css -->
        <link rel="stylesheet" href="css/animate.css">
        <!-- Icomoon Icon Fonts -->
        <link rel="stylesheet" href="css/icomoon.css">
      
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
        <!-- Owl Carousel CSS -->
        <link rel="stylesheet" href="css/owl.carousel.min.css">
        <link rel="stylesheet" href="css/owl.theme.default.min.css">
        <!-- Theme style -->
        <link rel="stylesheet" href="css/style.css">
      
        <!-- Additional Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&display=swap" rel="stylesheet">
      
        <!-- Bootstrap Icons -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.2/font/bootstrap-icons.css">
      
        <!-- JavaScript Libraries -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
      
        <title>Web Audio API Player with Seamless Loop</title>
      </head>
      
      <style>
        h1 {
          color: rgb(40, 36, 36);
          padding: 10px 20px;
          font-size: 16px;
          font-family: Arial;
          border: solid;
        }
      
        .button {
          display: inline-block;
          padding: 10px 20px;
          color: rgb(35, 32, 32);
          font-size: 16px;
          border: solid;
          border-color: black;
          cursor: pointer;
          border-radius: 4px;
          margin-right: 10px;
          background-color: #ffffff;
        }
      
        .button:hover {
  opacity: 0.8;
}

.btn.btn-primary {
    display: inline-block;
    color: rgb(35, 32, 32);
    font-size: 12px; /* Increase or decrease the value to change the font size */
    border: solid;
    border-color: black;
    cursor: pointer;
    border-radius: 4px;
    background-color: #ffffff;
    padding: 5px 10px; /* Increase or decrease the values to change the padding */
    width: 20px; /* Increase or decrease the value to change the width */
    height: 100px; /* Increase or decrease the value to change the height */
}



.btn.btn-primary:hover {
  opacity: 1;
}
      
        /* Responsive Styles */
        .FlexContainer {
          display: flex;
          flex-wrap: nowrap;
          justify-content: flex-start;
          align-items: flex-start;
          align-content: flex-start;
          width: 100%;
          background-color: #dfdddd;
          overflow: auto;
          flex-direction: row;
        }
      
        .FlexContainer div {
          width: 80px;
          height: 100px;
          margin: 10px;
        }

        .pagination {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }

    .pagination button {
      margin: 0 5px;
      padding: 5px 10px;
      border: none;
      background-color: #ddd;
      cursor: pointer;
    }

    .pagination button.active {
      background-color: #999;
      color: white;
    }
      </style>
      
      <h1>B.Hayes | Beat Loops of the North West | music creative code project | @ben.n.neb</h1>

      <div class="main-container">
        
            <section id="flex-container-1" class="FlexContainer">
               
              <div>
                <button onclick="togglePlay(1)" id="play-button1" class="button">Play 1</button>
              </div>
              <div>
                <button onclick="togglePlay(2)" id="play-button2" class="button">Play 2</button>
              </div>
              <div>
                <button onclick="togglePlay(3)" id="play-button3" class="button">Play 3</button>
              </div>
              <div>
                <button onclick="togglePlay(4)" id="play-button4" class="button">Play 4</button>
              </div>
            </section>

            <section id="flex-container-2" class="FlexContainer">
              <div>
                <button onclick="togglePlay(5)" id="play-button5" class="button">Play 5</button>
              </div>
              <div>
                <button onclick="togglePlay(6)" id="play-button6" class="button">Play 6</button>
              </div>
              <div>
                <button onclick="togglePlay(7)" id="play-button7" class="button">Play 7</button>
              </div>
              <div>
                <button onclick="togglePlay(8)" id="play-button8" class="button">Play 8</button>
              </div>
            
            </section>
    
            <section id="flex-container-3" class="FlexContainer">
              <div>
                <button onclick="togglePlay(9)" id="play-button9" class="button">Play 9</button>
              </div>
              <div>
                <button onclick="togglePlay(10)" id="play-button10" class="button">Play 10</button>
              </div>
              <div>
                <button onclick="togglePlay(11)" id="play-button11" class="button">Play 11</button>
              </div>
              <div>
                <button onclick="togglePlay(12)" id="play-button12" class="button">Play 12</button>
              </div>
            </section>
            <section id="flex-container-4" class="FlexContainer">
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal1">info</button>
              <div>
                <button onclick="togglePlay(13)" id="play-button13" class="button">Play 13</button>
              </div>
              <div>
                <button onclick="togglePlay(14)" id="play-button14" class="button">Play 14</button>
              </div>
              <div>
                <button onclick="togglePlay(15)" id="play-button15" class="button">Play 15</button>
              </div>
              <div>
                <button onclick="togglePlay(16)" id="play-button16" class="button">Play 16</button>
              </div>
              <div>
                <button onclick="togglePlay(13)" id="play-button13" class="button">Play 13</button>
              </div>
              <div>
                <button onclick="togglePlay(14)" id="play-button14" class="button">Play 14</button>
              </div>
              <div>
                <button onclick="togglePlay(15)" id="play-button15" class="button">Play 15</button>
              </div>
              <div>
                <button onclick="togglePlay(16)" id="play-button16" class="button">Play 16</button>
              </div>
            </section>
       
              
              <!-- Pagination -->
              <div class="pagination">
                <button class="page-btn active" onclick="showFlexContainer(1)">1</button>
                <button class="page-btn" onclick="showFlexContainer(2)">2</button>
                <button class="page-btn" onclick="showFlexContainer(3)">3</button>
                <button class="page-btn" onclick="showFlexContainer(4)">4</button>
              </div>
                
      
      <div class="modal fade" id="myModal1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title">Modal Title</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <img src="https://media.gq.com/photos/57447baf4115795956ec8193/master/w_1280,c_limit/edit-reggae-golden-era-gq-style-0616-02.jpg" class="img-fluid" alt="Responsive Image">
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
      
      <div class="modal fade" id="myModal2">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title">Modal Title</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <img src="" class="img-fluid" alt="Responsive Image">
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>

  <script>
   var audioContext = new (window.AudioContext || window.webkitAudioContext)();
var source;
var buffers = {};
var isPlaying = false;
var activeLoop = null;

function loadAudio(url, loopNumber) {
  var request = new XMLHttpRequest();
  request.open('GET', url, true);
  request.responseType = 'arraybuffer';
  request.onload = function() {
    audioContext.decodeAudioData(request.response, function(decodedBuffer) {
      buffers[loopNumber] = decodedBuffer;
    });
  }
  request.send();
}

function playBuffer(loopNumber) {
  var buffer = buffers[loopNumber];
  if (buffer) {
    if (source) {
      source.stop();
    }
    source = audioContext.createBufferSource();
    source.buffer = buffer;
    source.loop = true;
    source.connect(audioContext.destination);
    source.start(0);
    isPlaying = true;
    activeLoop = loopNumber;
  }
}

function stopBuffer() {
  if (source) {
    source.stop();
    isPlaying = false;
    activeLoop = null;
  }
}

function togglePlay(loopNumber) {
  var buttonElement = document.getElementById('play-button' + loopNumber);
  var activeButtonElement = document.getElementById('play-button' + activeLoop);

  if (loopNumber === activeLoop) {
    stopBuffer();
    buttonElement.innerText = 'Play ' + loopNumber;
    buttonElement.style.opacity = '1';
  } else {
    if (activeButtonElement) {
      activeButtonElement.innerText = 'Play ' + activeLoop;
      activeButtonElement.style.opacity = '1';
    }
    playBuffer(loopNumber);
    buttonElement.innerText = 'Stop ' + loopNumber;
    buttonElement.style.opacity = '0.5';
  }
}

// Load the audio files on page load.
loadAudio('https://kurtpetrek.github.io/loop-mixer/builds/development/audio/kick-snare-loop-1.mp3', 1);
loadAudio('https://kurtpetrek.github.io/loop-mixer/builds/development/audio/keys-loop-3.mp3', 2);
loadAudio('audio/loopTrap1.mp3', 3);
loadAudio('audio/loopTrap1.mp3', 4);
loadAudio('audio/loopTrap1.mp3', 5);
loadAudio('audio/loopTrap1.mp3', 6);
loadAudio('audio/loopTrap1.mp3', 7);
loadAudio('audio/loopTrap1.mp3', 8);
loadAudio('audio/loopTrap1.mp3', 9);
loadAudio('audio/loopTrap1.mp3', 10);
loadAudio('audio/loopTrap1.mp3', 11);
loadAudio('audio/loopTrap1.mp3', 12);
loadAudio('audio/loopTrap1.mp3', 13);
loadAudio('audio/loopTrap1.mp3', 14);
loadAudio('audio/loopTrap1.mp3', 15);
loadAudio('audio/loopTrap1.mp3', 16);
 

function showFlexContainer(page) {
  var containers = document.querySelectorAll('.FlexContainer');
  var buttons = document.querySelectorAll('.page-btn');

  containers.forEach(function(container) {
    container.style.display = 'none';
  });

  buttons.forEach(function(button) {
    button.classList.remove('active');
  });

  document.getElementById('flex-container-' + page).style.display = 'flex';
  buttons[page - 1].classList.add('active');
}

// Show the first flex container by default
showFlexContainer(1);

  </script>
</body>
</html>


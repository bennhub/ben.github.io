<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Ben N</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Favicon and Apple Touch Icon -->
    <link rel="shortcut icon" href="images/content/favicon.ico">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,600,400italic,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">

    <!-- Animate.css -->
    <link rel="stylesheet" href="css/animate.css">
    <!-- Icomoon Icon Fonts -->
    <link rel="stylesheet" href="css/icomoon.css">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <!-- Owl Carousel CSS -->
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Additional Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&display=swap" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.2/font/bootstrap-icons.css">

    <!-- JavaScript Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <title>Web Audio API Player with Seamless Loop</title>
</head>
<style>
    .tabs {
        display: -webkit-box;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;
        -webkit-flex-wrap: wrap;
        -ms-flex-wrap: wrap;
        flex-wrap: wrap;
    }

    .tabs label {
        -webkit-box-ordinal-group: 2;
        -webkit-order: 1;
        -ms-flex-order: 1;
        order: 1;
        display: block;
        padding: 1rem 2rem;
        margin-right: 0.2rem;
        cursor: pointer;
        background: #90CAF9;
        font-weight: bold;
        -webkit-transition: background ease 0.2s;
        transition: background ease 0.2s;
    }

    .tabs .tab {
        -webkit-box-ordinal-group: 100;
        -webkit-order: 99;
        -ms-flex-order: 99;
        order: 99;
        -webkit-box-flex: 1;
        -webkit-flex-grow: 1;
        -ms-flex-positive: 1;
        flex-grow: 1;
        width: 100%;
        display: none;
        padding: 1rem;
        background: #fafafa;
    }

    .tabs input[type="radio"] {
        position: absolute;
        opacity: 0;
    }

    .tabs input[type="radio"]:checked+label {
        background: #fafafa;
    }

    .tabs input[type="radio"]:checked+label+.tab {
        display: block;
    }

    @media (max-width: 45em) {

        .tabs .tab,
        .tabs label {
            -webkit-box-ordinal-group: NaN;
            -webkit-order: initial;
            -ms-flex-order: initial;
            order: initial;
        }

        .tabs label {
            width: 100%;
            margin-right: 0;
            margin-top: 0.2rem;
        }
    }

    /**
 * Generic Styling
*/

    body {
        background: #3498DB;
        padding: 10vw;
        font-family: "Roboto", Helvetica, Arial, "Lucida Grande", sans-serif;
        font-weight: 300;
        line-height: 1.6;
        max-width: 60rem;
        margin: 0 auto;
        font-size: 112%;
    }

    .button {
        display: inline-block;
        padding: 20px 20px;
        color: rgb(35, 32, 32);
        font-size: 12px;
        border: solid;
        border-color: black;
        cursor: pointer;
        border-radius: 4px;
        height: 60px;

        background-color: #ffffff;
    }

    .button:hover {
        opacity: 0.8;
    }

    .FlexContainer {
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        align-items: flex-start;
        align-content: flex-start;
        width: 40%;
        background-color: #ffffff;
        overflow: auto;
        margin: 0 auto; /* Center the tab container horizontally */
      }

    .FlexContainer div {
        width: calc(33.33% - 10px);
        /* Each button takes 33.33% width for a 3x3 grid */
        margin: 5px;
    }

    /* Adjusted styles for mobile view */
    @media (max-width: 600px) {
        .FlexContainer {
            width: 85%;
            justify-content: center;
            margin: 0 auto; /* Center the tab container horizontally */
            overflow: hidden;
      }
            
        }

        .FlexContainer div {
            width: calc(33.33% - 10px);
            /* Each button takes 33.33% width for a 3x3 grid */
            margin: 5px;     
        }
    


    .responsive-image {
        padding-bottom: 10px;
        max-width: 50%;
        height: auto;
    }
</style>

<body>
    <h1>Beat Loops | B.Hayes Code Project</h1>
    <div class="tabs">
        <input type="radio" name="tabs" id="tabone" checked="checked">
        <label for="tabone">Looper 1</label>
        <div class="tab">
            <h1>Signature Looper - Zoum Maestro</h1>
            <img src="images/loopers/looper.ZoumMaestro.png" class="responsive-image" alt="Responsive image">
            <section id="flex-container-1" class="FlexContainer">
                <div>
                    <button onclick="togglePlay(1)" id="play-button1" class="button">Play</button>
                </div>
                <div>
                    <button onclick="togglePlay(2)" id="play-button2" class="button">Play</button>
                </div>
                <div>
                    <button onclick="togglePlay(3)" id="play-button3" class="button">Play</button>
                </div>
                <div>
                    <button onclick="togglePlay(4)" id="play-button4" class="button">Play</button>
                </div>

                <div>
                    <button onclick="togglePlay(5)" id="play-button5" class="button">Play</button>
                </div>
                <div>
                    <button onclick="togglePlay(6)" id="play-button6" class="button">Play</button>
                </div>
               
            </section>
        </div>
        <input type="radio" name="tabs" id="tabtwo">
        <label for="tabtwo">Looper 2</label>
        <div class="tab">
            <h1>Tab Two Content</h1>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et
                dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip
                ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu
                fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia
                deserunt mollit anim id est laborum.</p>
        </div>
        <input type="radio" name="tabs" id="tabthree">
        <label for="tabthree">Tab Three</label>
        <div class="tab">
            <h1>Tab Three Content</h1>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
        </div>
    </div>

    <script>
        var audioContext = new (window.AudioContext || window.webkitAudioContext)();
        var source;
        var buffers = {};
        var isPlaying = false;
        var activeLoop = null;

        function loadAudio(url, loopNumber) {
            var request = new XMLHttpRequest();
            request.open('GET', url, true);
            request.responseType = 'arraybuffer';
            request.onload = function () {
                audioContext.decodeAudioData(request.response, function (decodedBuffer) {
                    buffers[loopNumber] = decodedBuffer;
                });
            }
            request.send();
        }

        function playBuffer(loopNumber) {
            var buffer = buffers[loopNumber];
            if (buffer) {
                if (source) {
                    source.stop();
                }
                source = audioContext.createBufferSource();
                source.buffer = buffer;
                source.loop = true;
                source.connect(audioContext.destination);
                source.start(0);
                isPlaying = true;
                activeLoop = loopNumber;
            }
        }

        function stopBuffer() {
            if (source) {
                source.stop();
                isPlaying = false;
                activeLoop = null;
            }
        }

        function togglePlay(loopNumber) {
            var buttonElement = document.getElementById('play-button' + loopNumber);
            var activeButtonElement = document.getElementById('play-button' + activeLoop);

            if (loopNumber === activeLoop) {
                stopBuffer();
                buttonElement.innerText = 'Play ' ;
                buttonElement.style.opacity = '1';
            } else {
                if (activeButtonElement) {
                    activeButtonElement.innerText = 'Play ' ;
                    activeButtonElement.style.opacity = '1';
                }
                playBuffer(loopNumber);
                buttonElement.innerText = 'Stop ' ;
                buttonElement.style.opacity = '0.5';
            }
        }

        // Load the audio files on page load.
        loadAudio('audio/oxu_Les Notres (Bootleg by Zoum).mp3', 1);
        loadAudio('audio/eti_Dont Matter (Bootleg by Zoum).mp3', 2);
        loadAudio('audio/txl_Hymn (Bootleg by Zoum).mp3', 3);
        loadAudio('audio/bfo_Opium (Bootleg by Zoum).mp3', 4);
        loadAudio('audio/loopTrap1.mp3', 5);
        loadAudio('audio/loopTrap1.mp3', 6);
        loadAudio('audio/loopTrap1.mp3', 7);
        loadAudio('audio/loopTrap1.mp3', 8);
        loadAudio('audio/loopTrap1.mp3', 9);
        loadAudio('audio/loopTrap1.mp3', 10);
        loadAudio('audio/loopTrap1.mp3', 11);
        loadAudio('audio/loopTrap1.mp3', 12);
        loadAudio('audio/loopTrap1.mp3', 13);
        loadAudio('audio/loopTrap1.mp3', 14);
        loadAudio('audio/loopTrap1.mp3', 15);
        loadAudio('audio/loopTrap1.mp3', 16);

    </script>

</body>

</html>